#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–∏
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç IP –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä

echo "üéÅ –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã —Ä–æ–∑—ã–≥—Ä—ã—à–∞ –ø—Ä–∏–∑–æ–≤..."
echo ""

# –û–ø—Ä–µ–¥–µ–ª—è–µ–º IP-–∞–¥—Ä–µ—Å
IP=$(ipconfig getifaddr en0 2>/dev/null || ipconfig getifaddr en1 2>/dev/null || echo "localhost")

if [ "$IP" = "localhost" ]; then
    echo "‚ö†Ô∏è  –ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å IP-–∞–¥—Ä–µ—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏"
    echo "üìù –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Wi-Fi –≤–∫–ª—é—á–µ–Ω –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω"
    echo ""
    echo "–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è Wi-Fi —Ç–æ—á–∫–∏ –¥–æ—Å—Ç—É–ø–∞:"
    echo "1. –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –û–±—â–∏–π –¥–æ—Å—Ç—É–ø"
    echo "2. –í–∫–ª—é—á–∏—Ç–µ '–û–±—â–∏–π –¥–æ—Å—Ç—É–ø –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É'"
    echo "3. –í—ã–±–µ—Ä–∏—Ç–µ 'Wi-Fi' –∫–∞–∫ —Å–ø–æ—Å–æ–± –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è"
    echo ""
    read -p "–í–≤–µ–¥–∏—Ç–µ IP-–∞–¥—Ä–µ—Å –≤—Ä—É—á–Ω—É—é (–∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ Enter –¥–ª—è localhost): " IP
    if [ -z "$IP" ]; then
        IP="localhost"
    fi
fi

echo "‚úÖ IP-–∞–¥—Ä–µ—Å: $IP"
echo "üöÄ –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞..."
echo ""

# –ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–µ—Ä —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º IP
HOST=$IP npm start

